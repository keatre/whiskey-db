# --- Core service config ---
APP_NAME=Whiskey DB
API_HOST=0.0.0.0
API_PORT=8000
API_BASE=http://api:8000

# --- Database ---
DATABASE_URL=sqlite:////data/whiskey.db

# --- CORS / Frontend ---
ALLOWED_ORIGINS=http://192.168.4.55:8080,http://localhost:8080,http://127.0.0.1:8080,http://461weston.ddns.net:8080
NEXT_PUBLIC_API_BASE=/api   # base path web app uses to reach API (keep /api unless you proxy differently)

# --- Security / JWT ---
SECRET_KEY=change-me-please   # strong random string
ACCESS_TOKEN_EXPIRE_MINUTES=20
REFRESH_TOKEN_EXPIRE_DAYS=30
JWT_COOKIE_NAME=access_token
JWT_REFRESH_COOKIE_NAME=refresh_token
COOKIE_SAMESITE=lax
COOKIE_SECURE=false
# COOKIE_DOMAIN=   # leave unset to bind cookie to current host

# --- LAN guest access ---
ALLOW_LAN_GUEST=true
TRUSTED_PROXIES=127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# --- External protection from brute force / DDoS ---
LOGIN_WINDOW_SECONDS=60      # time window for counting login attempts
LOGIN_MAX_ATTEMPTS=10        # max failed attempts before lockout
LOGIN_LOCKOUT_SECONDS=180    # lockout duration in seconds

# --- Uploads (NEW in v1.1.2) ---
UPLOAD_MAX_MB=10
UPLOAD_DIR=/data/uploads      # now stored in /data/uploads (backed up + bind mounted)

# --- Admin bootstrap (one-time) ---
ADMIN_USERNAME=admin
ADMIN_PASSWORD=please-change-me
ADMIN_EMAIL=

# --- When deploying behind HTTPS (uncomment & set) ---
# ALLOWED_ORIGINS=https://your-web-origin.example
# NEXT_PUBLIC_API_BASE=https://api.your-domain.example
# COOKIE_SECURE=true

# ================================
# Backups (NEW in v1.1.2)
# ================================
BACKUP_ENABLED=true

# Cron schedule for backups (default: 3:00 AM daily)
BACKUP_CRON=0 3 * * *

# Source path to back up (bind mounted by compose)
BACKUP_SOURCE=/data

# Optional tag for snapshots
BACKUP_TAG=whiskey-db

# Retention policy (adjust to taste)
RESTIC_KEEP_DAILY=7
RESTIC_KEEP_WEEKLY=4
RESTIC_KEEP_MONTHLY=12

# Where Restic writes backups (inside backup container’s NAS mount)
RESTIC_REPOSITORY=/remote/restic-whiskey-db

# Encryption password for the backup repo (choose a strong one!)
RESTIC_PASSWORD=change-me-strong

# --- NAS / SMB (CIFS) settings for the Docker volume ---
NAS_SMB_HOST=192.168.1.50     # your NAS IP/hostname
NAS_SMB_SHARE=backups         # share name (not // or \\ — just the share)
NAS_SMB_USER=backupbot        # NAS user with access to the share
NAS_SMB_PASS=super-secret     # that user’s password
NAS_SMB_VERS=3.0              # SMB protocol version (3.0 typical)
NAS_SMB_UID=0                 # file owner UID inside container
NAS_SMB_GID=0                 # file group GID inside container
NAS_SMB_EXTRA_OPTS=           # optional, e.g. nounix,iocharset=utf8
