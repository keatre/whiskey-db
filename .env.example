# ================================
# Whiskey DB - Example .env
# Copy to `.env` and edit values
# ================================

# --- Core service config ---
APP_NAME=Whiskey DB
API_HOST=0.0.0.0
API_PORT=8000

# For Docker Compose: point Next.js server-side proxy to the API service name.
# If you run API outside Compose, set to its reachable URL (e.g., http://localhost:8000)
API_BASE=http://api:8000

# --- Database ---
# Default SQLite (volume-mounted to /data in docker-compose)
# Postgres example: postgresql+psycopg://user:pass@db-host:5432/whiskey
DATABASE_URL=sqlite:////data/whiskey.db

# --- CORS / Frontend ---
# Comma-separated list of allowed web origins (where the browser app is served).
# Include localhost + any LAN/external domain you’ll use.
ALLOWED_ORIGINS=http://localhost:8080,http://127.0.0.1:8080

# Browser will call the API via the web server’s /api proxy (Next.js rewrite).
# Only change this if you disable the rewrite and want the browser to call a different origin.
NEXT_PUBLIC_API_BASE=/api

# --- Security / JWT ---
# Use a long, random string here (32+ chars).
SECRET_KEY=please-change-this-to-a-long-random-string

# Token lifetimes
ACCESS_TOKEN_EXPIRE_MINUTES=20
REFRESH_TOKEN_EXPIRE_DAYS=30

# Cookie names for JWTs (HttpOnly)
JWT_COOKIE_NAME=access_token
JWT_REFRESH_COOKIE_NAME=refresh_token

# Cookie behavior:
#   COOKIE_SAMESITE: lax | strict
#   COOKIE_SECURE: true when served over HTTPS (e.g., reverse proxy / tunnel)
COOKIE_SAMESITE=lax
COOKIE_SECURE=false

# --- LAN guest access ---
# If true: users from private IP ranges can browse read-only without login.
ALLOW_LAN_GUEST=true

# CSV list of proxies / private networks you trust for client IP detection.
# (Keep defaults unless you know you need to change.)
TRUSTED_PROXIES=127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# --- Login throttling (basic anti-bruteforce) ---
# At most LOGIN_MAX_ATTEMPTS within LOGIN_WINDOW_SECONDS; lockouts last LOGIN_LOCKOUT_SECONDS.
LOGIN_WINDOW_SECONDS=60
LOGIN_MAX_ATTEMPTS=10
LOGIN_LOCKOUT_SECONDS=180

# --- Uploads ---
# Max image size (MB) and storage directory (served at /static/uploads/*)
UPLOAD_MAX_MB=10
UPLOAD_DIR=static/uploads

# --- Admin bootstrap (one-time seed) ---
# Used by: docker compose exec api python -m app.bootstrap_admin
ADMIN_USERNAME=admin
ADMIN_PASSWORD=please-change-me
ADMIN_EMAIL=

# --- HTTPS deployment hints (uncomment + set when applicable) ---
# If your web UI is on HTTPS:
# ALLOWED_ORIGINS=https://your-web-origin.example
# COOKIE_SECURE=true
#
# If you DO NOT use Next.js proxy rewrites and want the browser to call API directly:
# NEXT_PUBLIC_API_BASE=https://api.your-domain.example
